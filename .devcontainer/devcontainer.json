{
  "name": "Rubic2Tripletex",
  // Use pre-built image from GHCR (faster startup)
  "image": "ghcr.io/frodeste/rubic2tripletex-devcontainer:latest",
  // Uncomment below to build locally instead (for Dockerfile changes)
  // "build": {
  //   "dockerfile": "Dockerfile",
  //   "context": "..",
  //   "args": {
  //     "BUN_VERSION": "1.2.4"
  //   }
  // },
  "workspaceFolder": "/workspaces/rubic2tripletex",
  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": true,
      "installOhMyZsh": true,
      "configureZshAsDefaultShell": true,
      "upgradePackages": true
    },
    "ghcr.io/devcontainers/features/github-cli:1": {
      "installDirectlyFromGitHubRelease": true,
      "version": "latest"
    }
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "biomejs.biome",
        "bradlc.vscode-tailwindcss",
        "yoavbls.pretty-ts-errors",
        "eamodio.gitlens",
        "redhat.vscode-yaml"
      ],
      "settings": {
        "editor.defaultFormatter": "biomejs.biome",
        "editor.formatOnSave": true,
        "editor.formatOnPaste": true,
        "editor.codeActionsOnSave": {
          "quickfix.biome": "explicit",
          "source.organizeImports.biome": "explicit"
        },
        "[javascript]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[javascriptreact]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[typescript]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[typescriptreact]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[json]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[jsonc]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "[css]": {
          "editor.defaultFormatter": "biomejs.biome"
        },
        "files.eol": "\n",
        "files.insertFinalNewline": true,
        "files.trimTrailingWhitespace": true,
        "typescript.preferences.importModuleSpecifier": "relative",
        "typescript.tsdk": "node_modules/typescript/lib",
        "biome.enabled": true,
        "tailwindCSS.experimental.classRegex": [
          ["cva\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"],
          ["cn\\(([^)]*)\\)", "[\"'`]([^\"'`]*).*?[\"'`]"]
        ]
      }
    }
  },
  "forwardPorts": [3000],
  "portsAttributes": {
    "3000": {
      "label": "Next.js",
      "onAutoForward": "notify"
    }
  },
  "containerEnv": {
    "NEXT_TELEMETRY_DISABLED": "1",
    "SKIP_ENV_VALIDATION": "true"
  },
  "remoteEnv": {
    "ANTHROPIC_API_KEY": "${localEnv:ANTHROPIC_API_KEY}",
    "OPENAI_API_KEY": "${localEnv:OPENAI_API_KEY}",
    "VERCEL_TOKEN": "${localEnv:VERCEL_TOKEN}",
    "GITHUB_TOKEN": "${localEnv:GITHUB_TOKEN}",
    "SENTRY_AUTH_TOKEN": "${localEnv:SENTRY_AUTH_TOKEN}"
  },
  "postCreateCommand": "bash .devcontainer/post-create.sh",
  "remoteUser": "node"
}
